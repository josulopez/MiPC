<!-- carrito.html -->
{% extends "master.html" %}

{% block content %}
<div class="container" style="margin-top: 100px;">
  <h2 class="text-center">Tu Carrito</h2>
  <table class="table table-bordered mt-4">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Precio unitario</th>
        <th>Total</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for item in carrito_items %}
      <tr>
        <td>{{ item.producto.nombre_producto }}</td>
        <td>{{ item.cantidad }}</td>
        <td>${{ item.producto.precio }}</td>
        <td>${{ item.total }}</td>
        <td>
          <a href="{% url 'eliminar_del_carrito' item.id %}" class="btn btn-sm btn-danger">
          Eliminar
          </a>
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="4" class="text-center">Tu carrito está vacío.</td></tr>
      {% endfor %}
    </tbody>
    <tfoot>
      <tr>
        <th colspan="3" class="text-end">Total General:</th>
        <th>${{ total_general }}</th>
      </tr>
    </tfoot>
  </table>
  {% if carrito_items %}
    <div class="text-end mt-4">
      <a href="{% url 'pagar' %}" class="btn btn-success">Pagar</a>
    </div>
  {% endif %}
</div>
{% endblock %}

